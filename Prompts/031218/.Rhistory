install.packages("tidyverse")
install.packages("tidyverse")
setwd("/Users/mimno/Documents/Teaching/3300/info-3300-spr2018/")
setwd("/Users/mimno/Documents/Teaching/3300/info3300-spr2018/")
setwd("/Users/mimno/Documents/Teaching/3300/info3300-spr2018/Prompts/031218")
monthly_job_change <- read_table("bls.txt")
library(tidyverse)
monthly_job_change <- read_table("bls.txt")
monthly_job_change
monthly_job_change <- read_csv("bls.txt")
monthly_job_change$Value
str_detect(monthly_job_change$Value, "(P)")
str_replace(monthly_job_change$Value, "(P)", "")
str_replace(monthly_job_change$Value, "\(P\)", "")
?str_replace
str_replace(monthly_job_change$Value, "\\(P\\)", "")
as.numeric(str_replace(monthly_job_change$Value, "\\(P\\)", ""))
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(monthly_job_change$Value, "\\(P\\)", "")),
Preliminary = str_detect(monthly_job_change$Value, "\\(P\\)"))
monthly_job_change
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", "")),
Preliminary = str_detect(Value, "\\(P\\)"),
Month = str_replace(Period, "M", ""))
monthly_job_change
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", "")),
Preliminary = str_detect(Value, "\\(P\\)"),
Month = str_replace(Period, "M", ""),
Date = as.Date(str_c(c(Year, Month, "01"), collapse = "-")))
str_c("20394", "10394")
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", "")),
Preliminary = str_detect(Value, "\\(P\\)"),
Month = str_replace(Period, "M", ""),
Date = as.Date(str_c(Year, Month, "01", collapse = "-")))
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", "")),
Preliminary = str_detect(Value, "\\(P\\)"),
Month = str_replace(Period, "M", ""),
Date = str_c(Year, Month, "01", collapse = "-"))
monthly_job_change
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", "")),
Preliminary = str_detect(Value, "\\(P\\)"),
Month = str_replace(Period, "M", ""),
Date = str_c(Year, "-", Month, "-", 01"))
)
)
;
""
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", "")),
Preliminary = str_detect(Value, "\\(P\\)"),
Month = str_replace(Period, "M", ""),
Date = str_c(Year, "-", Month, "-01"))
monthly_job_change
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", "")),
Preliminary = str_detect(Value, "\\(P\\)"),
Month = str_replace(Period, "M", ""),
Date = as.Date(str_c(Year, "-", Month, "-01")))
monthly_job_change
ggplot(monthly_job_change, aes(Date, JobChange)) + geom_point()
ggplot(monthly_job_change, aes(Date, JobChange)) + geom_line()
ggplot(monthly_job_change, aes(Date, JobChange)) + geom_point(aes(color = Period))
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", ""))) %>%
mutate(Preliminary = str_detect(Value, "\\(P\\)")) %>%
mutate(Month = str_replace(Period, "M", "")) %>%
mutate(Date = as.Date(str_c(Year, "-", Month, "-01"))) %>%
filter(Date > "2011-01-01")
ggplot(monthly_job_change, aes(Date, JobChange)) + geom_point()
ggplot(monthly_job_change, aes(Date, JobChange)) + geom_point() + ylim(c(-100, 400))
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_point() +
ylim(c(-100, 400)) +
facet_wrap(~ Period)
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
ylim(c(-100, 400)) +
facet_wrap(~ Period)
sample(monthly_job_change$Value)
sample(monthly_job_change$JobChange)
sample(monthly_job_change$JobChange)
sample(monthly_job_change$JobChange)
?sample
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", ""))) %>%
mutate(Preliminary = str_detect(Value, "\\(P\\)")) %>%
mutate(Month = str_replace(Period, "M", "")) %>%
mutate(Date = as.Date(str_c(Year, "-", Month, "-01"))) %>%
filter(Date > "2011-01-01") %>%
mutate(ShuffledJobs = sample_n(JobChange, 1))
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", ""))) %>%
mutate(Preliminary = str_detect(Value, "\\(P\\)")) %>%
mutate(Month = str_replace(Period, "M", "")) %>%
mutate(Date = as.Date(str_c(Year, "-", Month, "-01"))) %>%
filter(Date > "2011-01-01") %>%
mutate(ShuffledJobs = sample(JobChange))
monthly_job_change %>% select(JobChange, ShuffledJobs)
ggplot(monthly_job_change, aes(Date, ShuffledJobs)) +
geom_line() +
ylim(c(-100, 400)) +
facet_wrap(~ Period)
jobs_lm <- lm(JobChange ~ Date, monthly_job_change)
summary(jobs_lm)
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
ylim(c(-100, 400)) +
geom_abline(jobs_lm)
jobs_lm
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
ylim(c(-100, 400)) +
geom_smooth(method="lm")
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", ""))) %>%
mutate(Preliminary = str_detect(Value, "\\(P\\)")) %>%
mutate(Month = str_replace(Period, "M", "")) %>%
mutate(Date = as.Date(str_c(Year, "-", Month, "-01"))) %>%
filter(Date > "2007-01-01") %>%
mutate(ShuffledJobs = sample(JobChange))
jobs_lm <- lm(JobChange ~ Date, monthly_job_change)
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
ylim(c(-100, 400)) +
geom_smooth(method="lm")
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", ""))) %>%
mutate(Preliminary = str_detect(Value, "\\(P\\)")) %>%
mutate(Month = str_replace(Period, "M", "")) %>%
mutate(Date = as.Date(str_c(Year, "-", Month, "-01"))) %>%
filter(Date > "2007-01-01") %>%
mutate(ShuffledJobs = sample(JobChange))
jobs_lm <- lm(JobChange ~ Date, monthly_job_change)
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_smooth(method="lm")
monthly_job_change <- read_csv("bls.txt")
monthly_job_change <- monthly_job_change %>%
mutate(JobChange = as.numeric(str_replace(Value, "\\(P\\)", ""))) %>%
mutate(Preliminary = str_detect(Value, "\\(P\\)")) %>%
mutate(Month = str_replace(Period, "M", "")) %>%
mutate(Date = as.Date(str_c(Year, "-", Month, "-01"))) %>%
filter(Date > "2007-01-01") %>%
mutate(ShuffledJobs = sample(JobChange))
jobs_lm <- lm(JobChange ~ Date, monthly_job_change)
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_smooth(monthly_job_change %>% filter(Date > "2011-01-01"), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_smooth(data=monthly_job_change %>% filter(Date > "2011-01-01"), mapping=method=aes(Date, JobChange), "lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_smooth(data=monthly_job_change %>% filter(Date > "2011-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_vline(xintercept="2017-02-01") +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_vline(xintercept=Date("2017-02-01")) +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_vline(xintercept=as.Date("2017-02-01")) +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_vline(xintercept=as.Date("2017-02-01"), aes(color="gray20")) +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray20") +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_line() +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_line() +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_line(color="white", size=3) +
geom_line() +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_line() +
geom_point(color = Preliminary)
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_point(color = Preliminary)
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_point(color = Preliminary) +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_point(aes(color = Preliminary)) +
geom_smooth(data=monthly_job_change %>% filter(Date > "2008-01-01"), mapping=aes(Date, JobChange), method="lm")
summary(monthly_job_change)
yearly_job_change <- monthly_job_change %>%
group_by(Year) %>%
summarise(JobChange = mean(JobChange)) %>%
mutate(Date = as.Date(str_c(Year, "-01-01")))
ggplot(monthly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_point(aes(color = Preliminary))
ggplot(yearly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_point(aes(color = Preliminary))
ggplot(yearly_job_change, aes(Date, JobChange)) +
geom_vline(xintercept=as.Date("2017-02-01"), color="gray80") +
geom_point()
property_crime <- read_csv("fbi.txt")
property_crime <- read_tsv("fbi.txt")
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`)) +
geom_point()
property_crime <- read_tsv("fbi.txt") %>%
filter(State != "Total")
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`)) +
geom_point()
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text()
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 0.1)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 1000)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 10000)
property_crime <- read_tsv("fbi.txt") %>%
filter(State != "Total") %>%
mutate(Population = Population / 1000)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 100)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 500)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 100)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 100) +
geom_smooth(method="lm")
property_crime <- read_tsv("fbi.txt") %>%
filter(State != "Total") %>%
mutate(Population = Population / 1000) %>%
filter(Population < 2500)
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 100) +
geom_smooth(method="lm")
ggplot(property_crime, aes(Population, `Destruction/Damage/Vandalism`, label=State)) +
geom_point() +
geom_text(hjust = 0, nudge_x = 100) +
geom_smooth(method="lm") +
theme_minimal()
property_crime <- read_tsv("fbi.txt") %>%
filter(State != "Total") %>%
mutate(Population = Population / 1000)
lm(`Destruction/Damage/Vandalism` ~ Population, property_crime)
summary(lm(`Destruction/Damage/Vandalism` ~ Population, property_crime))
